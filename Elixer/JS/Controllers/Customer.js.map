{"version":3,"sources":["CustomerController.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Customer.js","sourcesContent":["function getUrlParameter(name, url) {\r\n    if (!url) {\r\n        url = window.location.href;\r\n    }\r\n    name = name.replace(/[\\[\\]]/g, \"\\\\$&\");\r\n    var regex = new RegExp(\"[?&]\" + name + \"(=([^&#]*)|&|#|$)\"),\r\n        results = regex.exec(url);\r\n    if (!results) return null;\r\n    if (!results[2]) return '';\r\n    return decodeURIComponent(results[2].replace(/\\+/g, \" \"));\r\n};\r\nvar app = angular.module('Customer', []).directive('jqdatepicker', function () {\r\n    return {\r\n        restrict: 'A',\r\n        require: 'ngModel',\r\n        link: function (scope, element, attrs, ngModelCtrl) {\r\n            element.datepicker({\r\n                dateFormat: 'DD, d  MM, yy',\r\n                onSelect: function (date) {\r\n                    scope.date = date;\r\n                    scope.$apply();\r\n                }\r\n            });\r\n        }\r\n    };\r\n});\r\napp.controller('CustomerRefundCtrl', ['$scope', '$http', function ($scope, $http) {\r\n    $scope.reasons = [];\r\n    $scope.wishes = [];\r\n    $scope.conditions = [];\r\n\r\n    $http.get(configuration.path + '/wish').success(function (data) {\r\n        $.each(data, function (index) {\r\n            $scope.wishes.push(data[index].Wish);\r\n        });\r\n    });\r\n    $http.get(configuration.path + '/reason').success(function (data) {\r\n        $.each(data, function (index) {\r\n            $scope.reasons.push(data[index].Reason);\r\n        });\r\n    });\r\n    $http.get(configuration.path + '/itemCondition').success(function (data) {\r\n        $.each(data, function (index) {\r\n            $scope.conditions.push(data[index].ItemCondition);\r\n        });\r\n    });\r\n    $http.get($(location).attr('href') + '/Fetch').success(function (data) {\r\n        $scope.form = data;\r\n    });\r\n    // on form submit generate qr code\r\n    $scope.SubmitForm = function () {\r\n        $http.post(configuration.path + '/UpdateCaseData', JSON.stringify($scope.form)).success(function (data) {\r\n            // window.location.href = configuration.path + '/QR';\r\n            window.location.href = configuration.path + '/BarCode';\r\n        });\r\n    };\r\n\r\n    // upload image related to case\r\n    $scope.SubmitImage = function () {\r\n        var formData = new FormData();\r\n        formData.append('file', $('#fileToUpload')[0].files[0]);\r\n        $.ajax({\r\n            url: configuration.path + '/File/Upload/' + 0,\r\n            type: \"POST\",\r\n            data: formData,\r\n            contentType: false,\r\n            cache: false,\r\n            processData: false,\r\n\r\n            success: function (data) {\r\n                alert('image uploaded!');\r\n            },\r\n            error: function (e) {\r\n\r\n            }\r\n        });\r\n\r\n    };\r\n}]);\r\napp.controller('CustomerRefundTrackCtrl', ['$scope', '$http', function ($scope, $http) {\r\n    $scope.form={};\r\n    $scope.reasons = [];\r\n    $scope.wishes = [];\r\n    $scope.conditions = [];\r\n\r\n    $http.get(configuration.path + '/wish').success(function (data) {\r\n        $.each(data, function (index) {\r\n            $scope.wishes.push(data[index].Wish);\r\n        });\r\n    });\r\n    $http.get(configuration.path + '/reason').success(function (data) {\r\n        $.each(data, function (index) {\r\n            $scope.reasons.push(data[index].Reason);\r\n        });\r\n    });\r\n    $http.get(configuration.path + '/itemCondition').success(function (data) {\r\n        $.each(data, function (index) {\r\n            $scope.conditions.push(data[index].ItemCondition);\r\n        });\r\n    });\r\n\r\n\r\n    $scope.SubmitForm = function () {\r\n        var trackID = getUrlParameter('trackID');\r\n        var url = configuration.path + \"/Status/\";\r\n        if (trackID != undefined)\r\n            url += trackID;\r\n        else\r\n            url += $('.trackerID').val();\r\n        window.location.href = url;\r\n\r\n\r\n    };\r\n\r\n    $scope.openDialog = function () {\r\n\r\n        $('.dialogForm').show();\r\n        $('.ui-widget-overlay').css('opacity', '0.3');\r\n        $('.returnBtn').attr('disabled', true);\r\n        $('.trackBtn').attr('disabled', true);\r\n        $('.trackerID').attr('disabled', true);\r\n\r\n    }\r\n\r\n    $scope.close = function () {\r\n\r\n        $('.dialogForm').hide();\r\n        $('.ui-widget-overlay').css('opacity', '1');\r\n        $('.returnBtn').attr('disabled', false);\r\n        $('.trackBtn').attr('disabled', false);\r\n        $('.trackerID').attr('disabled', false);\r\n        $(\"input[name='sellerName']\").val('');\r\n        $(\"input[name='email']\").val('');\r\n        $(\"input[name='orderNr']\").val('');\r\n    }\r\n\r\n    $scope.send = function () {\r\n        if ($scope.form.emailAddress != undefined) {\r\n            var SID=-1;\r\n            if(getUrlParameter('SID') !=null)\r\n                SID=getUrlParameter('SID');\r\n\r\n            $http.post(configuration.path + '/RequestCase/'+SID, JSON.stringify($scope.form)).success(function (data) {\r\n                $scope.form={};\r\n                $scope.close();\r\n               alert(data);\r\n            });\r\n        }\r\n\r\n    };\r\n\r\n    $scope.init = function () {\r\n\r\n        var trackID = getUrlParameter('trackID');\r\n        $('.trackerID').val(trackID);\r\n    };\r\n\r\n}]);"],"sourceRoot":"/source/"}