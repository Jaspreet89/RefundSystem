{"version":3,"sources":["app.js","User.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACvFA","file":"User.js","sourcesContent":["(function() {\r\n\r\n    'use strict';\r\n\r\n    angular\r\n        .module('RefundSystemApp', ['ui.router', 'satellizer','angularFileUpload'])\r\n        .config(function($stateProvider, $urlRouterProvider, $authProvider, $httpProvider, $provide,$locationProvider) {\r\n\r\n            function redirectWhenLoggedOut($q, $injector) {\r\n\r\n                return {\r\n                    responseError: function(rejection) {\r\n                        var $state = $injector.get('$state');\r\n                        var rejectionReasons = ['token_not_provided', 'token_expired', 'token_absent', 'token_invalid'];\r\n                        angular.forEach(rejectionReasons, function(value, key) {\r\n                            if(rejection.data.error === value) {\r\n                                localStorage.removeItem('user');\r\n                                $state.go('auth');\r\n                            }\r\n                        });\r\n                        return $q.reject(rejection);\r\n                    }\r\n                }\r\n            }\r\n\r\n\r\n            $provide.factory('redirectWhenLoggedOut', redirectWhenLoggedOut);\r\n            $httpProvider.interceptors.push('redirectWhenLoggedOut');\r\n            $authProvider.loginUrl = configuration.path+'/api/authenticate';\r\n            $urlRouterProvider.otherwise('/auth');\r\n            $stateProvider\r\n                .state('auth', {\r\n                    url:'/auth',\r\n                    templateUrl: '../resources/views/AuthView.blade.php',\r\n                    controller: 'AuthController as auth'\r\n                })\r\n                .state('users', {\r\n                    url: '/users',\r\n                    templateUrl: '../resources/views/UserView.blade.php',\r\n                    controller: 'UserController as user'\r\n                })\r\n                .state('sellerrefundform', {\r\n                    url: '/sellerrefundform',\r\n                    templateUrl: '../resources/views/SellerRefundForm.blade.php',\r\n                    controller: 'SellerRefundFormCtrl as sellerrefundform'\r\n                })\r\n                .state('manageuser', {\r\n                    url: '/manageuser',\r\n                    templateUrl: '../resources/views/ManageUser.blade.php',\r\n                    controller: 'ManageUserCtrl as manageuser'\r\n                })\r\n                .state('warehouse', {\r\n                    url: '/warehouse',\r\n                    templateUrl: '../resources/views/Warehouse.blade.php',\r\n                    controller: 'WarehouseCtrl as warehouse'\r\n                })\r\n                .state('notification', {\r\n                    url: '/notification',\r\n                    templateUrl: '../resources/views/Notification.blade.php',\r\n                    controller: 'NotificationCtrl as notification'\r\n                })\r\n                .state('upload', {\r\n                    url: '/upload',\r\n                    templateUrl: '../resources/views/Uploader.blade.php',\r\n                    params: {\r\n                        'casedId':-1\r\n                    }\r\n                })\r\n            ;\r\n        })\r\n        .run(function($rootScope, $state) {\r\n            $rootScope.$on('$stateChangeStart', function(event, toState, toParams, fromState) {\r\n                $('.ui-dialog').remove();\r\n                user = JSON.parse(localStorage.getItem('user'));\r\n                if(user) {\r\n                    $rootScope.authenticated = true;\r\n                    $rootScope.currentUser = user;\r\n                    if(toState.name === \"auth\") {\r\n                        event.preventDefault();\r\n                        if(fromState.name === \"\"){\r\n                            $state.go('users');\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n        });\r\n})();\r\n","function Logout(t,e,o){$.get(configuration.path+\"/logout?token=\"+t.getToken()),t.logout().then(function(){\"Seller\"==getCookie(\"Role\")&&clearInterval(NotificationInterval),eraseCookie(\"Role\"),localStorage.removeItem(\"user\"),e.authenticated=!1,e.currentUser=null,o.go(\"auth\")})}function createCookie(t,e,o){if(o){var i=new Date;i.setTime(i.getTime()+24*o*60*60*1e3);var n=\"; expires=\"+i.toGMTString()}else var n=\"\";document.cookie=t+\"=\"+e+n+\"; path=/\"}function getCookie(t){for(var e=t+\"=\",o=document.cookie.split(\";\"),i=0;i<o.length;i++){for(var n=o[i];\" \"==n.charAt(0);)n=n.substring(1,n.length);if(0==n.indexOf(e))return n.substring(e.length,n.length)}return null}function eraseCookie(t){document.cookie=t+\"=; expires=Thu, 01 Jan 1970 00:00:01 GMT;path=/\"}function Back(t){void 0==window.history.back()?t.go(\"users\"):window.history.back()}var user,NotificationInterval;!function(){\"use strict\";function t(t,e,o,i){var n=this;n.loginError=!1,n.loginErrorText,n.login=function(){var a={email:n.email,password:n.password};t.login(a).then(function(){return o.get(configuration.path+\"/api/authenticate/user?token=\"+t.getToken()).then(function(a){var s=JSON.stringify(a.data.user);localStorage.setItem(\"user\",s),i.authenticated=!0,i.currentUser=a.data.user,o.get(configuration.path+\"/api/GetRole?token=\"+t.getToken()).success(function(t){createCookie(\"Role\",t),\"Warehouse\"!=t?e.go(\"users\"):\"Warehouse\"==t&&e.go(\"warehouse\")}).error(function(o){n.loginError=!0,n.loginErrorText=\"Role Not Assigned!\",Logout(t,i,e)})})},function(t){n.loginError=!0,n.loginErrorText=t.data.error})}}angular.module(\"RefundSystemApp\").controller(\"AuthController\",[\"$auth\",\"$state\",\"$http\",\"$rootScope\",t])}(),function(){\"use strict\";function t(t,e,o,i){if(user&&null!=getCookie(\"Role\")){var n=this;n.CasesGrid=[],n.reasons=[],n.wishes=[],n.conditions=[],n.Messages=\"\",n.Role=getCookie(\"Role\"),n.NotificationCount=0,n.NotificationBoxToggle=!0,n.AddImage=function(t){i.go(\"upload\",{casedId:t})},n.refresh=function(){n.CasesGrid=[],t.get(configuration.path+\"/Seller/AllCases/\"+user.id+\"?token=\"+e.getToken()).success(function(t){$.each(t,function(e){var o=JSON.parse(t[e].RefundCaseDetail),i=JSON.parse(t[e].RefundCase_Id);o.Id=i,o.IsLabelGenerated=\"\"!=t[e].RefundCaseStatusKey,n.CasesGrid.push(o)})})},n.refresh(),n.ReGetNotificationCount=function(){t.get(configuration.path+\"/Communication/GetNotificationCount/\"+user.id+\"?token=\"+e.getToken()).success(function(t){n.NotificationCount=t})},n.ReGetNotificationCount(),NotificationInterval=setInterval(function(){n.ReGetNotificationCount()},3e5),n.AllNotifications=function(){i.go(\"notification\")},n.ShowNotifications=function(){n.HideDialog(),n.NotificationBoxToggle?(n.NotificationBoxToggle=!1,n.Messages=\"\",t.get(configuration.path+\"/Communication/GetTopFiveNotifications/\"+user.id+\"?token=\"+e.getToken()).success(function(o){o.data.length>0&&(n.Messages=o.data,$(\"#messageDiv\").dialog({width:300,height:300,overflow:\"auto\",position:{my:\"top\",at:\"bottom\",of:$(\"#notificationBtn\")},buttons:{ShowAll:function(){n.HideDialog(),n.NotificationBoxToggle=!0,n.AllNotifications()},\"Mark All as Read\":function(){t.get(configuration.path+\"/Communication/MarkAllNotificationRead/\"+user.id+\"?token=\"+e.getToken()).success(function(){n.HideDialog(),n.NotificationBoxToggle=!0,n.ReGetNotificationCount()})}}}),$(\"#messageDiv\").dialog(\"open\"),$(\".ui-dialog-titlebar\").remove())})):n.NotificationBoxToggle=!0},n.HideDialog=function(){$(\"#messageDiv\").hasClass(\"ui-dialog-content\")&&($(\"#messageDiv\").hide(),$(\"#messageDiv\").dialog(\"destroy\"))},t.get(configuration.path+\"/wish\").success(function(t){$.each(t,function(e){n.wishes.push(t[e].Wish)})}),t.get(configuration.path+\"/reason\").success(function(t){$.each(t,function(e){n.reasons.push(t[e].Reason)})}),t.get(configuration.path+\"/itemCondition\").success(function(t){$.each(t,function(e){n.conditions.push(t[e].ItemCondition)})}),n.ToSellerForm=function(){o.authenticated?i.go(\"sellerrefundform\"):n.logout()},n.ToUserGrid=function(){o.authenticated&&\"Admin\"==n.Role?i.go(\"manageuser\"):n.logout()},n.ToWarehouseGrid=function(){o.authenticated&&\"Admin\"==n.Role?i.go(\"warehouse\"):n.logout()},n.EditCase=function(t){n.EditFormData=\"\",n.EditFormData=t;var e=$(\"#editDiv\");e.dialog({width:700,close:n.refresh}),e.dialog(\"open\")},n.SubmitEditedForm=function(){var o=n.EditFormData.Id;delete n.EditFormData.Id,delete n.EditFormData.IsLabelGenerated;var i=$(\"#editDiv\");i.dialog(\"destroy\"),t.post(configuration.path+\"/Seller/UpdateCaseData/\"+o+\"?token=\"+e.getToken(),JSON.stringify(n.EditFormData)).success(function(t){n.refresh()})},n.GetLink=function(o){t.get(configuration.path+\"/Seller/GetLink/\"+o+\"?token=\"+e.getToken()).success(function(t){$(\"<div />\").html(t).dialog({title:\"Copy & Send To Customer\",width:$(window).width()-20,height:200})})},n.DeleteCase=function(o){t.get(configuration.path+\"/Seller/DeleteCase/\"+o+\"?token=\"+e.getToken()).success(function(t){n.refresh()})},n.ShowMessages=function(o){n.HideDialog(),n.NotificationBoxToggle=!0,n.Messages=\"\",t.get(configuration.path+\"/Communication/GetAllMessage/\"+o+\"?token=\"+e.getToken()).success(function(t){t.length>0&&(n.Messages=t,$(\"#messageDiv\").dialog({width:400,title:\"Messages\",height:500,overflow:\"auto\"}),$(\"#messageDiv\").dialog(\"open\"))})},n.ShowImages=function(o){t.get(configuration.path+\"/Communication/File/GetAllImages/\"+o+\"?token=\"+e.getToken()).success(function(t){var e=$(\"<div id='allimages'></div>\");$.each(t,function(t,o){e.append(\"<a target='_blank' href=\"+o.Image_Path+\"\\\\\"+o.Image_Name+\" ><img src=\"+o.Image_Path+\"\\\\\"+o.Image_Name+\" style='height: 60px;width: 60px;margin:10px;border:2px solid black;border-radius: 5px;' /></a>\")}),$(\"<div />\").html(e).dialog()})},n.CreateNotification=function(){t.get(configuration.path+\"/Seller/GetAllAdmins?token=\"+e.getToken()).success(function(t){n.AllSellers=t;var e=$(\"<select class='form-control' id='allAdmin'></select>\");$.each(n.AllSellers,function(t,o){e.append(\"<option id=\"+o.id+\">\"+o.name+\"</option>\")});var o=$('<textarea style=\"width: 600px; height: 200px;margin: 2%\" class=\"msgAdminText\"/>'),i=$(\"<input/>\").attr({type:\"button\",value:\"Submit\",\"class\":\"btn btn-danger notificationmessage\"});$(document).off(\"click\").on(\"click\",\".notificationmessage\",function(){n.SubmitNotification($(\"#allAdmin\").children(\":selected\").attr(\"id\"),user.id,$(\".msgAdminText\").val())}),$('<div id=\"notificationmessageDiv\" />').html(e).append(o).append(i).dialog({width:700,title:\"Notify Admin\"})})},n.SubmitNotification=function(o,i,n){var a={};a.to_user_id=o,a.from_user_id=i,a.notificationMsg=n,t.post(configuration.path+\"/Communication/SendNotification?token=\"+e.getToken(),JSON.stringify(a)).success(function(t){$(\"#notificationmessageDiv\").remove()})},n.logout=function(){Logout(e,o,i)}}else Logout(e,o,i)}angular.module(\"RefundSystemApp\").controller(\"UserController\",[\"$http\",\"$auth\",\"$rootScope\",\"$state\",t])}(),function(){\"use strict\";angular.module(\"RefundSystemApp\").controller(\"SellerRefundFormCtrl\",[\"$scope\",\"$http\",\"$auth\",\"$rootScope\",\"$state\",function(t,e,o,i,n){user&&null!=getCookie(\"Role\")?(t.reasons=[],t.wishes=[],t.conditions=[],e.get(configuration.path+\"/wish\").success(function(e){$.each(e,function(o){t.wishes.push(e[o].Wish)})}),e.get(configuration.path+\"/reason\").success(function(e){$.each(e,function(o){t.reasons.push(e[o].Reason)})}),e.get(configuration.path+\"/itemCondition\").success(function(e){$.each(e,function(o){t.conditions.push(e[o].ItemCondition)})}),t.form={sellerNumber:user.id,emailAddress:\"\",orderNumber:\"\",date:\"\",price:\"\",itemSKU:\"\",reason:\"\",condition:\"\",wish:\"\"},t.logout=function(){Logout(o,i,n)},t.Back=function(){Back(n)},t.SubmitForm=function(){\"\"!=t.form.sellerNumber&&e.post(configuration.path+\"/Seller/GenerateRefundLink?token=\"+o.getToken(),JSON.stringify(t.form)).success(function(t){$(\"<div />\").html(t).dialog({title:\"Copy & Send To Customer\",width:$(window).width()-20,height:200})})}):Logout(o,i,n)}])}(),function(){\"use strict\";function t(t,e,o,i){if(user&&null!=getCookie(\"Role\")){var n=this;n.refresh=function(){n.UserGrid=[],n.EditFormData=\"\",t.get(configuration.path+\"/api/Users?token=\"+e.getToken()).success(function(t){jQuery.each(t.users,function(e,o){o.id==user.id&&delete t.users[e]}),n.UserGrid=t.users})},n.refresh(),n.EditUser=function(t){n.EditFormData=t;var e=$(\"#editDiv\");e.dialog({width:700,close:n.refresh}),e.dialog(\"open\")},n.SubmitEditedForm=function(){var o=$(\"#editDiv\");o.dialog(\"destroy\"),t.post(configuration.path+\"/api/UpdateUser?token=\"+e.getToken(),JSON.stringify(n.EditFormData)).success(function(t){n.refresh()})},n.OpenAddUserForm=function(){var t=$(\"#addUserDiv\");t.dialog({width:700,close:n.refresh}),t.dialog(\"open\")},n.SubmitNewUserForm=function(){var o=$(\"#addUserDiv\");o.remove(),t.post(configuration.path+\"/api/CreateUser?token=\"+e.getToken(),JSON.stringify(n.EditFormData)).success(function(t){n.refresh()})},n.AttachRole=function(o){t.get(configuration.path+\"/api/Roles?token=\"+e.getToken()).success(function(t){var e=$(\"<select class='form-control' id='asnRoleSelect'></select>\");$.each(t,function(t,o){e.append(\"<option id=\"+o.id+\">\"+o.name+\"</option>\")});var i=$(\"<input/>\").attr({type:\"button\",value:\"Attach Role\",style:\"margin-top:2%\",\"class\":\"btn btn-danger attachRole\"});$(document).off(\"click\").on(\"click\",\".attachRole\",function(){n.AssignRole(o)}),$('<div  id=\"asnRole\"/>').html(e).append(i).dialog({width:700,title:\"Select Role For User\"})})},n.AssignRole=function(o){o.role=$(\"#asnRoleSelect\").children(\":selected\").attr(\"id\"),$(\"#asnRole\").remove(),t.post(configuration.path+\"/api/AssignRole?token=\"+e.getToken(),JSON.stringify(o)).success(function(t){n.refresh()})},n.DeleteUser=function(o){t.get(configuration.path+\"/api/DeleteUser/\"+o+\"?token=\"+e.getToken()).success(function(t){n.refresh()})},n.CreateRole=function(){alert(\"This Feature is under construction\")},n.CreatePermission=function(){alert(\"This Feature is under construction\")},n.AttachPermissionRole=function(){alert(\"This Feature is under construction\")},n.logout=function(){Logout(e,o,i)},n.Back=function(){Back(i)}}else Logout(e,o,i)}angular.module(\"RefundSystemApp\").controller(\"ManageUserCtrl\",[\"$http\",\"$auth\",\"$rootScope\",\"$state\",t])}(),function(){\"use strict\";function t(t,e,o,i){if(user&&null!=getCookie(\"Role\")){var n=this;n.CasesGrid=[],n.reasons=[],n.wishes=[],n.conditions=[],n.Search=\"\",n.Role=getCookie(\"Role\"),n.AllSellers=[],n.Messages=\"\",n.NotificationCount=0,n.NotificationBoxToggle=!0,n.StatusDropDownData={1:\"Label Generated\",2:\"Item Recieved at Warehouse\",3:\"Item Checked-Status(Dismatch)\",4:\"Item Checked-case in process\",5:\"refund-close case\"},n.refresh=function(){\"\"!=n.Search?n.SearchClick():\"Admin\"==n.Role&&($(\"#DetailDiv\").hide(),n.CasesGrid=[],n.EditFormData=\"\",t.get(configuration.path+\"/api/AllCases?token=\"+e.getToken()).success(function(t){t.length>0&&$.each(t,function(e){n.CasesGrid.push(t[e])})}))},n.refresh(),t.get(configuration.path+\"/wish\").success(function(t){$.each(t,function(e){n.wishes.push(t[e].Wish)})}),t.get(configuration.path+\"/reason\").success(function(t){$.each(t,function(e){n.reasons.push(t[e].Reason)})}),t.get(configuration.path+\"/itemCondition\").success(function(t){$.each(t,function(e){n.conditions.push(t[e].ItemCondition)})}),n.ReGetNotificationCount=function(){t.get(configuration.path+\"/Communication/GetNotificationCount/\"+user.id+\"?token=\"+e.getToken()).success(function(t){n.NotificationCount=t})},n.AllNotifications=function(){i.go(\"notification\")},n.ReGetNotificationCount(),NotificationInterval=setInterval(function(){n.ReGetNotificationCount()},3e5),n.AllNotifications=function(){i.go(\"notification\")},n.ShowNotifications=function(){n.HideDialog(),n.NotificationBoxToggle?(n.NotificationBoxToggle=!1,n.Messages=\"\",t.get(configuration.path+\"/Communication/GetTopFiveNotifications/\"+user.id+\"?token=\"+e.getToken()).success(function(o){o.data.length>0&&(n.Messages=o.data,$(\"#messageDiv\").dialog({width:300,height:300,overflow:\"auto\",position:{my:\"top\",at:\"bottom\",of:$(\"#notificationBtn\")},buttons:{ShowAll:function(){n.HideDialog(),n.NotificationBoxToggle=!0,n.AllNotifications()},\"Mark All as Read\":function(){t.get(configuration.path+\"/Communication/MarkAllNotificationRead/\"+user.id+\"?token=\"+e.getToken()).success(function(){n.HideDialog(),n.NotificationBoxToggle=!0,n.ReGetNotificationCount()})}}}),$(\"#messageDiv\").dialog(\"open\"),$(\".ui-dialog-titlebar\").remove())})):n.NotificationBoxToggle=!0},n.HideDialog=function(){$(\"#messageDiv\").hasClass(\"ui-dialog-content\")&&($(\"#messageDiv\").hide(),$(\"#messageDiv\").dialog(\"destroy\"))},n.CreateNotification=function(){t.get(configuration.path+\"/Warehouse/GetAllSellers?token=\"+e.getToken()).success(function(t){n.AllSellers=t;var e=$(\"<select class='form-control' id='allSeller'></select>\");$.each(n.AllSellers,function(t,o){e.append(\"<option id=\"+o.id+\">\"+o.name+\"</option>\")});var o=$('<textarea style=\"width: 600px; height: 200px;margin: 2%\" class=\"msgText\"/>'),i=$(\"<input/>\").attr({type:\"button\",value:\"Submit\",\"class\":\"btn btn-danger notificationmessage\"});$(document).off(\"click\").on(\"click\",\".notificationmessage\",function(){n.SubmitNotification($(\"#allSeller\").children(\":selected\").attr(\"id\"),user.id,$(\".msgText\").val())}),$('<div id=\"notificationmessageDiv\" />').html(e).append(o).append(i).dialog({width:700,title:\"Notify Seller\"})})},n.SubmitNotification=function(o,i,n){var a={};a.to_user_id=o,a.from_user_id=i,a.notificationMsg=n,t.post(configuration.path+\"/Communication/SendNotification?token=\"+e.getToken(),JSON.stringify(a)).success(function(t){$(\"#notificationmessageDiv\").remove()})},n.AddComment=function(t){var e=$('<textarea style=\"width: 674px; height: 28px;\" class=\"msgText\"/>'),o=$(\"<input/>\").attr({type:\"button\",value:\"Submit\",style:\"margin-top:2%;display:block;\",\"class\":\"btn btn-danger sendMessage\"});$(document).off(\"click\").on(\"click\",\".sendMessage\",function(){n.MessageSubmitted(t,$(\".msgText\").val())}),$('<div id=\"messageDiv\" />').html(e).append(o).dialog({width:700,title:\"Add Message\"})},n.MessageSubmitted=function(o,i){var a={};a.RefundCase_Id=o.RefundCase_Id,a.From_name=user.name,a.Seller_Id=o.Seller_Id,a.Message=i,t.post(configuration.path+\"/Communication/AddMessage?token=\"+e.getToken(),JSON.stringify(a)).success(function(t){$(\"#messageDiv\").remove(),n.refresh()})},n.SearchClick=function(){n.CasesGrid=[],n.EditFormData=\"\",t.get(configuration.path+\"/Warehouse/ReturnedCase/\"+n.Search+\"?token=\"+e.getToken()).success(function(t){if($(\"#DetailDiv\").hide(),t.length>0){n.CasesGrid.push(t[0]);var e=JSON.parse(t[0].RefundCaseDetail);n.EditFormData=e,$(\"#DetailDiv\").show()}else alert(\"Case Id Not Found\")})},n.Back=function(){Back(i)},n.UpdateStatusCase=function(t){var e=$(\"<select class='form-control' id='updateCaseStatus'></select>\");$.each(n.StatusDropDownData,function(t,o){e.append(\"<option id=\"+t+\">\"+o+\"</option>\")});var o=$(\"<input/>\").attr({type:\"button\",value:\"Submit\",style:\"margin-top:2%\",\"class\":\"btn btn-danger updateCaseStatus\"});$(document).off(\"click\").on(\"click\",\".updateCaseStatus\",function(){n.StatusUpdate(t,$(\"#updateCaseStatus\").children(\":selected\").val())}),$('<div id=\"updateCaseStatusDiv\" />').html(e).append(o).dialog({width:700,title:\"Select Role For User\"})},n.StatusUpdate=function(o,i){var a={};a.RefundCase_Id=o,a.RefundCaseStatus=i,$(\"#updateCaseStatusDiv\").remove(),t.post(configuration.path+\"/Warehouse/UpdateCaseStatus?token=\"+e.getToken(),JSON.stringify(a)).success(function(t){n.refresh()})},n.EditCase=function(t){var e=JSON.parse(t.RefundCaseDetail);n.EditFormData=e,n.EditFormData.Id=t.RefundCase_Id;var o=$(\"#editDiv\");o.dialog({width:700,close:n.refresh}),o.dialog(\"open\")},n.SubmitEditedForm=function(){var o=n.EditFormData.Id;delete n.EditFormData.Id;var i=$(\"#editDiv\");i.dialog(\"destroy\"),t.post(configuration.path+\"/Warehouse/UpdateCaseData/\"+o+\"?token=\"+e.getToken(),JSON.stringify(n.EditFormData)).success(function(t){n.refresh()})},n.AddImage=function(t){i.go(\"upload\",{casedId:t})},n.ShowImages=function(o){t.get(configuration.path+\"/File/GetAllImages/\"+o+\"?token=\"+e.getToken()).success(function(t){var e=$(\"<div id='allimages'></div>\");$.each(t,function(t,o){e.append(\"<a target='_blank' href=\"+o.Image_Path+\"\\\\\"+o.Image_Name+\" ><img src=\"+o.Image_Path+\"\\\\\"+o.Image_Name+\" style='height: 60px;width: 60px;margin:10px;border:2px solid black;border-radius: 5px;' /></a>\")}),$(\"<div />\").html(e).dialog()})},n.logout=function(){Logout(e,o,i)}}else Logout(e,o,i)}angular.module(\"RefundSystemApp\").controller(\"WarehouseCtrl\",[\"$http\",\"$auth\",\"$rootScope\",\"$state\",t])}(),function(){\"use strict\";function t(t,e,o,i){if(user&&null!=getCookie(\"Role\")){var n=this;n.NotificationsGrid=\"\",n.Messages=\"\",n.Role=getCookie(\"Role\"),n.refresh=function(){n.NotificationsGrid=\"\",t.get(configuration.path+\"/Communication/GetAllNotifications/\"+user.id+\"?token=\"+e.getToken()).success(function(t){t.length>0&&(n.NotificationsGrid=t)})},n.refresh(),n.MarkRead=function(o){t.get(configuration.path+\"/Communication/MarkRead/\"+o+\"?token=\"+e.getToken()).success(function(t){n.refresh()})},n.MarkUnRead=function(o){t.get(configuration.path+\"/Communication/MarkUnRead/\"+o+\"?token=\"+e.getToken()).success(function(t){n.refresh()})},n.ForwardNotification=function(o){t.get(configuration.path+\"/api/AllWarehouseUsers?token=\"+e.getToken()).success(function(t){n.AllSellers=t;var e=$(\"<select class='form-control' id='allWarehouse'></select>\");$.each(n.AllSellers,function(t,o){e.append(\"<option id=\"+o.id+\">\"+o.name+\"</option>\")});var i=$(\"<input/>\").attr({type:\"button\",value:\"Submit\",\"class\":\"btn btn-danger notificationmessage\"});$(document).off(\"click\").on(\"click\",\".notificationmessage\",function(){n.SubmitFWDNotification($(\"#allWarehouse\").children(\":selected\").attr(\"id\"),o)}),$('<div id=\"notificationmessageDiv\" />').html(e).append(i).dialog({width:700,title:\"forward to warehouse\"})})},n.SubmitFWDNotification=function(o,i){var a={};a.to_user_id=o,a.id=i,t.post(configuration.path+\"/api/UpdateNotification?token=\"+e.getToken(),JSON.stringify(a)).success(function(t){$(\"#notificationmessageDiv\").remove(),n.refresh()})},n.ReplyMessage=function(t){var e=$('<textarea style=\"width: 600px; height: 200px;margin: 2%\" class=\"msgText\"/>'),o=$(\"<input/>\").attr({type:\"button\",value:\"Submit\",\"class\":\"btn btn-danger notificationmessage\"});$(document).off(\"click\").on(\"click\",\".notificationmessage\",function(){n.SubmitNotification(t,user.id,$(\".msgText\").val())}),$('<div id=\"notificationmessageDiv\" />').html(e).append(o).dialog({width:700,title:\"Reply\"})},n.MessageChain=function(o){n.Messages=\"\",t.get(configuration.path+\"/Communication/GetChainNotifications/\"+o+\"?token=\"+e.getToken()).success(function(t){n.Messages=t,$(\"#messageDiv\").dialog({width:400,title:\"Messages\",height:500,overflow:\"auto\"}),$(\"#messageDiv\").dialog(\"open\")})},n.SubmitNotification=function(o,i,a){var s={};s.parent_id=o.Id,s.to_user_id=o.ReplyBackTo,s.from_user_id=i,s.notificationMsg=a,t.post(configuration.path+\"/Communication/ReplyNotification?token=\"+e.getToken(),JSON.stringify(s)).success(function(t){$(\"#notificationmessageDiv\").remove(),n.refresh()})},n.Back=function(){Back(i)},n.logout=function(){Logout(e,o,i)}}else Logout(e,o,i)}angular.module(\"RefundSystemApp\").controller(\"NotificationCtrl\",[\"$http\",\"$auth\",\"$rootScope\",\"$state\",t])}(),function(){\"use strict\";angular.module(\"RefundSystemApp\").directive(\"jqdatepicker\",function(){return{restrict:\"A\",require:\"ngModel\",link:function(t,e,o,i){e.datepicker({dateFormat:\"DD, d  MM, yy\"})}}})}(),function(){\"use strict\";angular.module(\"RefundSystemApp\").directive(\"message\",function(){var t={};return t.template='<div class=\"media-body\"><span class=\"text-muted pull-right\"><small class=\"text-muted\">{{message.DateTime}}</small></span><strong class=\"text-success\">@{{message.From_name}}</strong><p>{{message.Message}}</p></div><hr>',t})}();"],"sourceRoot":"/source/"}