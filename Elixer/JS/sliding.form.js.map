{"version":3,"sources":["sliding.form.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"sliding.form.js","sourcesContent":["$(function() {\r\n\t/*\r\n\tnumber of fieldsets\r\n\t*/\r\n\tvar fieldsetCount = $('#formElem').children().length;\r\n\r\n\t/*\r\n\tcurrent position of fieldset / navigation link\r\n\t*/\r\n\tvar current \t= 1;\r\n\r\n\t/*\r\n\tsum and save the widths of each one of the fieldsets\r\n\tset the final sum as the total width of the steps element\r\n\t*/\r\n\tvar stepsWidth\t= 0;\r\n    var widths \t\t= new Array();\r\n\t$('#steps .step').each(function(i){\r\n        var $step \t\t= $(this);\r\n\t\twidths[i]  \t\t= stepsWidth;\r\n        stepsWidth\t \t+= $step.width();\r\n    });\r\n\t$('#steps').width(stepsWidth);\r\n\r\n\t/*\r\n\tto avoid problems in IE, focus the first input of the form\r\n\t*/\r\n\t$('#formElem').children(':first').find(':input:first').focus();\r\n\r\n\t/*\r\n\tshow the navigation bar\r\n\t*/\r\n\t$('#navigation').show();\r\n\r\n\t/*\r\n\twhen clicking on a navigation link\r\n\tthe form slides to the corresponding fieldset\r\n\t*/\r\n    $('#navigation a').bind('click',function(e){\r\n\t\tvar $this\t= $(this);\r\n\t\tvar prev\t= current;\r\n\t\t$this.closest('ul').find('li').removeClass('selected');\r\n        $this.parent().addClass('selected');\r\n\t\t/*\r\n\t\twe store the position of the link\r\n\t\tin the current variable\r\n\t\t*/\r\n\t\tcurrent = $this.parent().index() + 1;\r\n\t\t/*\r\n\t\tanimate / slide to the next or to the corresponding\r\n\t\tfieldset. The order of the links in the navigation\r\n\t\tis the order of the fieldsets.\r\n\t\tAlso, after sliding, we trigger the focus on the first\r\n\t\tinput element of the new fieldset\r\n\t\tIf we clicked on the last link (confirmation), then we validate\r\n\t\tall the fieldsets, otherwise we validate the previous one\r\n\t\tbefore the form slided\r\n\t\t*/\r\n        $('#steps').stop().animate({\r\n            marginLeft: '-' + widths[current-1] + 'px'\r\n        },500,function(){\r\n\t\t\tif(current == fieldsetCount)\r\n\t\t\t\tvalidateSteps();\r\n\t\t\telse\r\n\t\t\t\tvalidateStep(prev);\r\n\t\t\t$('#formElem').children(':nth-child('+ parseInt(current) +')').find(':input:first').focus();\r\n\t\t});\r\n        e.preventDefault();\r\n    });\r\n\r\n\t/*\r\n\tclicking on the tab (on the last input of each fieldset), makes the form\r\n\tslide to the next step\r\n\t*/\r\n\t$('#formElem > fieldset').each(function(){\r\n\t\tvar $fieldset = $(this);\r\n\t\t$fieldset.children(':last').find(':input').keydown(function(e){\r\n\t\t\tif (e.which == 9){\r\n\t\t\t\t$('#navigation li:nth-child(' + (parseInt(current)+1) + ') a').click();\r\n\t\t\t\t/* force the blur for validation */\r\n\t\t\t\t$(this).blur();\r\n\t\t\t\te.preventDefault();\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n\r\n\t/*\r\n\tvalidates errors on all the fieldsets\r\n\trecords if the Form has errors in $('#formElem').data()\r\n\t*/\r\n\tfunction validateSteps(){\r\n\t\tvar FormErrors = false;\r\n\t\tfor(var i = 1; i < fieldsetCount; ++i){\r\n\t\t\tvar error = validateStep(i);\r\n\t\t\tif(error == -1)\r\n\t\t\t\tFormErrors = true;\r\n\t\t}\r\n\t\t$('#formElem').data('errors',FormErrors);\r\n\t}\r\n\r\n\t/*\r\n\tvalidates one fieldset\r\n\tand returns -1 if errors found, or 1 if not\r\n\t*/\r\n\tfunction validateStep(step){\r\n\t\tif(step == fieldsetCount) return;\r\n\r\n\t\tvar error = 1;\r\n\t\tvar hasError = false;\r\n\t\t$('#formElem').children(':nth-child('+ parseInt(step) +')').find(':input:not(button)').each(function(){\r\n\t\t\tvar $this \t\t= $(this);\r\n\t\t\tvar valueLength = jQuery.trim($this.val()).length;\r\n\r\n\t\t\tif(valueLength == ''){\r\n\t\t\t\thasError = true;\r\n\t\t\t\t$this.css('background-color','#FFEDEF');\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t\t$this.css('background-color','#FFFFFF');\r\n\t\t});\r\n\t\tvar $link = $('#navigation li:nth-child(' + parseInt(step) + ') a');\r\n\t\t$link.parent().find('.error,.checked').remove();\r\n\r\n\t\tvar valclass = 'checked';\r\n\t\tif(hasError){\r\n\t\t\terror = -1;\r\n\t\t\tvalclass = 'error';\r\n\t\t}\r\n\t\t$('<span class=\"'+valclass+'\"></span>').insertAfter($link);\r\n\r\n\t\treturn error;\r\n\t}\r\n\r\n\t/*\r\n\tif there are errors don't allow the user to submit\r\n\t*/\r\n\t$('#refundButton').bind('click',function(){\r\n\t\tif($('#formElem').data('errors')){\r\n\t\t\talert('Please correct the errors in the Form');\r\n\t\t\treturn false;\r\n\t\t}\r\n\t});\r\n});"],"sourceRoot":"/source/"}